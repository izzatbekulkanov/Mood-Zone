<!doctype html>
<html lang="en" dir="ltr">

{% load static %}

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title data-setting="app_name" data-rightJoin=" Pro | Responsive Bootstrap 5 Admin Dashboard Template">
        UXIFAR</title>
    <meta name="description"
          content="Hope UI Pro is a revolutionary Bootstrap Admin Dashboard Template and UI Components Library. The Admin Dashboard Template and UI Component features 8 modules.">
    <meta name="keywords"
          content="Namangan davlat universiteti">
    <meta name="author" content="Iqonic Design">
    <meta name="DC.title" content="Hope UI Pro | Responsive Bootstrap 5 Admin Dashboard Template">

    <!-- Google Font Api KEY-->
    <meta name="google_font_api" content="AIzaSyBG58yNdAjc20_8jAvLNSVi9E4Xhwjau_k">
    <!-- Config Options -->
    <meta name="setting_options"
          content='{&quot;saveLocal&quot;:&quot;sessionStorage&quot;,&quot;storeKey&quot;:&quot;huisetting-html&quot;,&quot;setting&quot;:{&quot;app_name&quot;:{&quot;value&quot;:&quot;Hope UI&quot;},&quot;theme_scheme_direction&quot;:{&quot;value&quot;:&quot;ltr&quot;},&quot;theme_scheme&quot;:{&quot;value&quot;:&quot;light&quot;},&quot;theme_style_appearance&quot;:{&quot;value&quot;:[&quot;theme-default&quot;]},&quot;theme_color&quot;:{&quot;colors&quot;:{&quot;--{{ prefix }}primary&quot;:&quot;#3a57e8&quot;,&quot;--{{ prefix }}info&quot;:&quot;#08B1BA&quot;},&quot;value&quot;:&quot;theme-color-default&quot;},&quot;theme_transition&quot;:{&quot;value&quot;:&quot;theme-with-animation&quot;},&quot;theme_font_size&quot;:{&quot;value&quot;:&quot;theme-fs-md&quot;},&quot;page_layout&quot;:{&quot;value&quot;:&quot;container-fluid&quot;},&quot;header_navbar&quot;:{&quot;value&quot;:&quot;default&quot;},&quot;header_banner&quot;:{&quot;value&quot;:&quot;default&quot;},&quot;sidebar_color&quot;:{&quot;value&quot;:&quot;sidebar-white&quot;},&quot;card_color&quot;:{&quot;value&quot;:&quot;card-default&quot;},&quot;sidebar_type&quot;:{&quot;value&quot;:[]},&quot;sidebar_menu_style&quot;:{&quot;value&quot;:&quot;left-bordered&quot;},&quot;footer&quot;:{&quot;value&quot;:&quot;default&quot;},&quot;body_font_family&quot;:{&quot;value&quot;:null},&quot;heading_font_family&quot;:{&quot;value&quot;:null}}}'>
    <!-- Favicon -->
    <link rel="shortcut icon" href="https://templates.iqonic.design/hope-ui/pro/html/assets/images/favicon.ico">
    <link rel="stylesheet" href="{% static 'assets/css/loader.css' %}">
    <!-- Library / Plugin Css Build -->
    {% block style %}


    {% endblock style %}

</head>
<body class="  ">
<!-- loader Start -->
{% include 'layout/loader.html' %}
<!-- loader END -->
<!-- sidebar Start -->
{% include 'layout/sidebar.html' %}
<!-- sidebar End -->
<!-- Content Start -->

<main class="main-content">
    <!-- Footer Section Start -->
    {% include 'layout/navbar.html' %}
    <!-- Footer Section End -->
    <!-- Content -->
    {% block body %}
    {% endblock body %}
    <!-- Content End -->
    <!-- Footer Section Start -->
    {% include 'layout/footer.html' %}
    <!-- Footer Section End -->
</main>
<!-- Content End -->
<!-- Landing Start -->
{% include 'layout/landing.html' %}
<!-- Landing End -->

<!-- Setting offcanvas start -->
{% include 'layout/offcanvas.html' %}
<!-- Setting offcanvas end  -->

<!-- Settings sidebar Start -->
{% include 'layout/setting.html' %}
<!-- Settings sidebar End -->

<!-- btn download Start -->
{% include 'layout/download.html' %}
<!-- btn download End -->

<!-- Modal -->
{% include 'layout/modal.html' %}


<!-- Modal -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.7/axios.min.js" integrity="sha512-NQfB/bDaB8kaSXF8E77JjhHG5PM6XVRxvHzkZiwl3ddWCEPBa23T76MuWSwAJdMGJnmQqM0VeY9kFszsrBEFrQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
{% block script %}

{% endblock script %}

<script>

    $(document).ready(function() {
    var groupItems = $(".dropdown-menu .dropdown-item"); // group itemlarini tanlash

    groupItems.on("click", function(e) {
        e.preventDefault(); // tavsiya etilgan link harakatlarini to'xtatish

        var groupName = $(this).text().trim(); // bosilgan tugmani olish

        // Ma'lumot obyektini tuzish
        var data = new FormData();
        data.append('now_role', groupName);

        // Axios orqali so'rovni jo'natish
        axios.post('/user/set_now_role/', data, {
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
                'Content-Type': 'multipart/form-data',
                'X-CSRFToken': '{{ csrf_token }}' // Django CSRF token
            }
        })
        .then(response => {
            console.log('Foydalanuvchi hozirgi roli muvaffaqiyatli saqlandi: ' + groupName);
            // Sahifani yangilash
            window.location.href = '/' + encodeURIComponent(groupName.toLowerCase()) + '/'; // groupName ni URL-ga kichkina harflarda qo'shish

        })
        .catch(error => {
            console.error('Foydalanuvchi hozirgi roli saqlanmadi. Xatolik: ' + error);
        })
        .finally(() => {
            // Toast xabarni ko'rsatish
            const Toast = Swal.mixin({
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: 3000,
                timerProgressBar: true,
                didOpen: (toast) => {
                    toast.addEventListener('mouseenter', Swal.stopTimer);
                    toast.addEventListener('mouseleave', Swal.resumeTimer);
                }
            });

            Toast.fire({
                icon: 'success',
                title: `Siz ${groupName} roliga o'tdingiz`
            });
        });
    });
});

</script>
</body>

</html>
